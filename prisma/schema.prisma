datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id       Int    @id @default(autoincrement())
  name     String
  password String
  email    String @unique
  userType String @default("user")
}

model Otp {
  id        Int      @id @default(autoincrement())
  otpCode   String
  createdAt DateTime @default(now())
  expiresAt DateTime
  email     String
}

model Shipper {
  id        Int     @id @default(autoincrement())
  name      String
  phone     String
  email     String  @unique
  shipperId String  @unique
  orders    Order[]
  cityId    Int
  City      City    @relation(fields: [cityId], references: [id])
}

model Order {
  id              Int            @id @default(autoincrement())
  cusName         String
  cusPhone        String
  cusAddress      String
  pickUpAddress   String
  pickUpPhone     String
  pickUpName      String
  pickUpDate      DateTime
  pickUpCityId    Int
  pickUpCity      City           @relation("OrderToPickupCity", fields: [pickUpCityId], references: [id])
  cod             Float
  delivery        Boolean
  note            String
  trackingId      String         @unique
  cityId          Int
  deliFee         Int?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  shipperId       Int
  Shipper         Shipper        @relation(fields: [shipperId], references: [id])
  destinationCity City           @relation("OrderToDestinationCity", fields: [cityId], references: [id])
  orderDetails    orderDetails[]
}

model orderDetails {
  id        Int      @id @default(autoincrement())
  kg        Float
  cm        Int?
  OrderId   Int
  Images    String[]
  Order     Order    @relation(fields: [OrderId], references: [id])
  createdAt DateTime @default(now())
}

model State {
  id     Int    @id @default(autoincrement())
  name   String @unique
  cities City[]
}

model City {
  id                Int       @id @default(autoincrement())
  name              String
  stateId           Int
  status            Boolean
  fee               Float     @default(4500)
  Code              String
  state             State     @relation(fields: [stateId], references: [id])
  pickupOrders      Order[]   @relation("OrderToPickupCity")
  destinationOrders Order[]   @relation("OrderToDestinationCity")
  Shipper           Shipper[]
}
